/*!
 * jQuery bsValidate Plugin
 * Form Validation for Twitter Bootstrap Forms (https://github.com/matthewjmink/bsValidate)
 * Copyright 2015 Matt Mink
 * Licensed under MIT (https://github.com/matthewjmink/bsValidate/blob/master/LICENSE)
 */
!function(a,b,c,d){"use strict";function e(b,c){p.alertTarget=a(b),this.element=b,this.settings=a.extend({},p,c),this._defaults=p,this._name=o,this.init()}function f(a,b,c,d){return a?("undefined"!=typeof b&&h(c,b,d),1):("undefined"!=typeof b&&i(c,d),0)}function g(a,b,c,d){return a?("undefined"!=typeof b&&j(c,b,d),1):("undefined"!=typeof b&&k(c,d),0)}function h(b,c,d){if(b.find("."+d).length<1){var e=a('<span class="help-block '+d+'">'+c+"</span>");b.append(e)}}function i(a,b){var c=a.find("."+b);c.remove()}function j(b,c,d){if(b.find("."+d).length<1){var e=a('<div class="alert alert-danger '+d+'">'+c+"</div>");b.prepend(e)}}function k(a,b){var c=a.find("."+b);c.remove()}function l(b){var c,d=b.data,e=d.bsv,g=a(e.element),h=a(b.target),i=d.fields,j=d.key,k=h.parents(".form-group"),l=0,o=h.val();if("undefined"!=typeof i[j].required&&(c="help-required",l+=f(h.isBlank(e),i[j].required.helpText,k,c)),"undefined"!=typeof i[j].email&&(c="help-email",l+=f(!n(o)&&""!==o,i[j].email.helpText,k,c)),"undefined"!=typeof i[j].characters&&(c="help-characters",l+=f(o.length>i[j].characters.limit,i[j].characters.helpText,k,c)),"undefined"!=typeof i[j].regex&&(c="help-regex",l+=f(!m(i[j].regex.pattern,o)&&!h.isBlank(e),i[j].regex.helpText,k,c)),"undefined"!=typeof i[j].match){c="help-match";var p=g.find('[name="'+i[j].match.field+'"]').val();l+=f(p!==o&&!h.isBlank(e),i[j].match.helpText,k,c)}l>0?k.addClass("has-error"):k.removeClass("has-error")}function m(a,b){return b.match(a)}function n(a){var b=/[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/i;return b.test(a)}var o="bsValidate",p={requiredSelector:"input.required:not(:checkbox),textarea.required,select.required,[required]",fields:{},mergeAlerts:!1,alertMessage:null,blankSelectValue:"",novalidate:!0,success:function(){},fail:function(a){a.preventDefault()}};a.extend(e.prototype,{init:function(){var b=this,c=a(b.element),d=c.find(b.settings.requiredSelector),e=b.settings.fields,f=c.attr("novalidate");"undefined"==typeof f&&b.settings.novalidate&&c.attr("novalidate",""),d.each(function(){var b=a(this).attr("name");if("undefined"==typeof e[b]||"undefined"==typeof e[b].required){var c=a(this).parents(".form-group"),d=c.find(".label,label").text();e[b]="undefined"==typeof e[b]?{}:e[b],e[b].el=a(this),e[b].required={alert:d+" is required."}}}),a.each(e,function(a,d){("object"!=typeof e[a].el||"undefined"==typeof e[a].el.jquery)&&(e[a].el=c.find('[name="'+a+'"]')),e[a].el.on("change",{bsv:b,fields:e,key:a,value:d},l)}),c.submit(function(d){d.preventDefault();var f=!0,h=b.settings.mergeAlerts?b.settings.alertMessage:"",i=!1;null===h&&(h="<ul>",i=!0),a.each(e,function(a,d){var j,k=e[a].el.parents(".form-group"),l=0,o=e[a].el.val(),p=a.replace(/[^a-zA-Z\d-]/g,"-");if("undefined"!=typeof e[a].required&&(j="alert-"+p+"-required",l+=b.settings.mergeAlerts?0|e[a].el.isBlank(b):g(e[a].el.isBlank(b),e[a].required.alert,b.settings.alertTarget,j),h+=i?"<li>"+e[a].required.alert+"</li>":""),"undefined"!=typeof e[a].email&&(j="alert-"+p+"-email",l+=b.settings.mergeAlerts?!n(o)&&0|!e[a].el.isBlank(b):g(!n(o)&&!e[a].el.isBlank(b),e[a].email.alert,b.settings.alertTarget,j),h+=i?"<li>"+e[a].email.alert+"</li>":""),"undefined"!=typeof e[a].characters&&(j="alert-"+p+"-characters",l+=b.settings.mergeAlerts?o.length>e[a].characters.limit|0:g(o.length>e[a].characters.limit,e[a].characters.alert,b.settings.alertTarget,j),h+=i?"<li>"+e[a].characters.alert+"</li>":""),"undefined"!=typeof e[a].regex&&(j="alert-"+p+"-regex",l+=b.settings.mergeAlerts?!m(e[a].regex.pattern,o)&&0|!e[a].el.isBlank(b):g(!m(e[a].regex.pattern,o)&&!e[a].el.isBlank(b),e[a].regex.alert,b.settings.alertTarget,j),h+=i?"<li>"+e[a].regex.alert+"</li>":""),"undefined"!=typeof e[a].match){j="alert-"+p+"-match";var q=c.find('[name="'+e[a].match.field+'"]').val();l+=b.settings.mergeAlerts?q!==o&&0|!e[a].el.isBlank(b):g(q!==o&&!e[a].el.isBlank(b),e[a].match.alert,b.settings.alertTarget,j),h+=i?"<li>"+e[a].regex.alert+"</li>":""}l>0?(k.addClass("has-error"),f=!1):k.removeClass("has-error")}),g(!f&&b.settings.mergeAlerts,h,b.settings.alertTarget,"bsv-alert"),f?b.settings.success(d):b.settings.fail(d)})},destroy:function(b){var c=this,d=c.settings.fields;c.settings.fields={},a.each(d,function(a,b){"object"==typeof b.el&&"undefined"!=typeof b.el.jquery&&b.el.off("change",l)}),a(c.element).off("submit").removeData(),b&&b()}}),a.fn[o]=function(b){return this.each(function(){var c=a.data(this,"plugin_"+o);c?"destroy"===b&&c.destroy():a.data(this,"plugin_"+o,new e(this,b))})},a.fn.isBlank=function(a){var b=this.val();return""===b||null===b||b.length<1||"select"===this[0].nodeName.toLowerCase()&&b==a.settings.blankSelectValue},a.fn.destroy=function(){return this.each(function(){var b=a.data(this,"plugin_"+o);b&&b.destroy()})}}(jQuery,window,document);